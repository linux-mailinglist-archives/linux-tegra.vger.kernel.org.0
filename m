Return-Path: <linux-tegra-owner@vger.kernel.org>
X-Original-To: lists+linux-tegra@lfdr.de
Delivered-To: lists+linux-tegra@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id AF35E1C3634
	for <lists+linux-tegra@lfdr.de>; Mon,  4 May 2020 11:53:47 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728057AbgEDJxq (ORCPT <rfc822;lists+linux-tegra@lfdr.de>);
        Mon, 4 May 2020 05:53:46 -0400
Received: from mx2.suse.de ([195.135.220.15]:35914 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726666AbgEDJxq (ORCPT <rfc822;linux-tegra@vger.kernel.org>);
        Mon, 4 May 2020 05:53:46 -0400
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx2.suse.de (Postfix) with ESMTP id 4E576AEF9;
        Mon,  4 May 2020 09:53:46 +0000 (UTC)
Date:   Mon, 04 May 2020 11:53:44 +0200
Message-ID: <s5hk11sf2l3.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Sameer Pujar <spujar@nvidia.com>
Cc:     <perex@perex.cz>, <tiwai@suse.com>, <thierry.reding@gmail.com>,
        <jonathanh@nvidia.com>, <linux-tegra@vger.kernel.org>,
        <alsa-devel@alsa-project.org>, <linux-kernel@vger.kernel.org>,
        <sharadg@nvidia.com>, <mkumard@nvidia.com>,
        <viswanathl@nvidia.com>, <rlokhande@nvidia.com>,
        <dramesh@nvidia.com>, <atalambedu@nvidia.com>
Subject: Re: [PATCH 0/3] Tegra194 HW Fixes
In-Reply-To: <2828495a-d27a-a69b-37f5-fd3fb714188b@nvidia.com>
References: <1588580176-2801-1-git-send-email-spujar@nvidia.com>
        <s5ho8r4f6hx.wl-tiwai@suse.de>
        <124d4a5c-e198-d8c0-5fb7-65d008852e32@nvidia.com>
        <2828495a-d27a-a69b-37f5-fd3fb714188b@nvidia.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Sender: linux-tegra-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-tegra.vger.kernel.org>
X-Mailing-List: linux-tegra@vger.kernel.org

On Mon, 04 May 2020 10:48:46 +0200,
Sameer Pujar wrote:
> 
> 
> 
> On 5/4/2020 2:05 PM, Sameer Pujar wrote:
> >
> >
> > On 5/4/2020 1:59 PM, Takashi Iwai wrote:
> >> External email: Use caution opening links or attachments
> >>
> >>
> >> On Mon, 04 May 2020 10:16:13 +0200,
> >> Sameer Pujar wrote:
> >>> This series proposes SW workarounds for Tegra194 HDA HW bugs.
> >>> Following are the two issues seen:
> >>>   1. GCAP register does not reflect true capability.
> >>>      The actual number of SDO lines is "4", where as it reflects "2".
> >>>   2. With 4 SDO line configuration playback fails for,
> >>>      44.1K/48K, 2-channel, 16-bps audio stream.
> >>>
> >>> After fixing [1], issue [2] is uncovered.
> >>> As per recommendation by Tegra HW team the workarounds are pushed.
> >>>
> >>> Testing done
> >>> ============
> >>>   * Verify GCAP register after registering HDA sound card
> >>>   * Verify audio playback for 44.1K/48K, 2-channel, 16-bps.
> >>>
> >>> Sameer Pujar (3):
> >>>    ALSA: hda/tegra: correct number of SDO lines for Tegra194
> >>>    ALSA: hda: add member to store ratio for stripe control
> >>>    ALSA: hda/tegra: workaround playback failure on Tegra194
> >> Through a quick glance, all changes look good.
> >>
> >> Is the device already in market, i.e. it had hit users?  If yes, I'm
> >> going to merge for 5.7, otherwise for 5.8.
> >
> > Yes the device is in the market. But has not been reported by end users.
> > During internal resting this has been discovered. I am fine with
> > merging this to 5.8.
> 
> To add, end users currently won't see this problem because things work
> fine with 2-SDO lines. The issue is seen when Tegra194 is allowed to
> utilize its actual capability of 4-SDO lines.

Thanks for the information.  Then I queued all three patches now to
for-next branch destined for 5.8.


Takashi
